<!DOCTYPE html>
<html>
  <head>
    <title>Messenger</title>
    <link id="favicon" rel="icon" type="image/png" href="favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,700,400italic" rel="stylesheet" type="text/css">
     
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css"/>
    <!--screen css-->
    <link rel="stylesheet" href="https://query.data.world/s/xh3uwrljigk3ld5fan6rrhppmvedaz"/>

    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script src="http://cdn.pubnub.com/pubnub-3.5.1.js"></script>
    <script src="https://query.data.world/s/676qbn5mgqpfziqdvv3yg6fothgnyb"></script>
 <!DOCTYPE html>
<html>
  <head>
  <body>
 <!-- Home Page -->
    <div data-role="page" id="homePage" data-theme="c" class="type-home">

      <div data-role="content">
        <div class="logo">
          <h3>Messenger</h3>
        </div>
        <input type="text" name="name" id="username" placeholder="Username" />
        <input type="password" name="pass" id="password" placeholder="Password" />
        <a href="#" id="startChatButton" data-role="button">Start Chatting!</a>
        <a href="#" id="setPassword" data-role="button">Set Password</a>
      </div><!-- /content -->

    </div><!-- /page -->

    <!-- Chat List Page -->
    <div data-role="page" id="chatListPage" data-theme="c" class="type-chat-list">
      <div data-role="header" style="Background-color:black; border-color:black;">
        <h1>Current Conversations</h1>
      </div>

      <div data-role="content" style="min-width:97vw;">
        <input type="text" name="name" id="chatRoomName" placeholder="Chat Room Name" />
        <a href="#" id="newChatButton" data-role="button">Join or Create New Conversation</a>
         
        <br />

        <ul data-role="listview" data-split-icon="delete" data-split-theme="c" id="chatList">
          <!-- <li><span class="username">User123:</span>This is my message.</li> -->
        </ul>
      </div>
    </div>

    <!-- Chat Page -->
    <div data-role="page" id="chatPage" data-theme="c" class="type-interior">

      <div data-role="content">
        <div class="content-primary">
          <div data-role="header" data-position="fixed" data-tap-toggle="false" style="background-color:black; border-color:black;">
            <h1>Messenger</h1>
          </div><!-- /header -->

          <div data-role="content">
            <ul data-role="listview" id="messageList">
            </ul>
            
          </div>

          <div data-role="footer" data-theme="c">
            
            <textarea id="messageContent" type="text" oninput="resizeInput();"></textarea>
            <a href="#" id="sendMessageButton" style="margin:0px; float:right; margin-top:-45px; margin-right:30px;" data-role="button">Send</a>
              
             
              <div class="ui-block-a" style="overflow:scroll; margin:0px; height:50px; min-width:600px;">
              <ul data-role="listview" id="userList" data-theme="c">
        
          </ul>
         
          </div>
          </div>
              
          </div>
        </div>
        <div class="ui-header ui-header-fixed" style="top:5px"><a href="#" id="backButton" style="visibility:hidden;" data-rel="back" data-role="button">Conversations</a></div>
        <div class="content-secondary" style="overflow:hidden; left:0px; margin:0px; top:43px;">
          
        <div style="margin-bottom:20px;">
        <a href="#" onclick="add()" style="max-width:50px; font-size:20px; border: none; background-color: transparent; color:blue; float:right; margin:10px; margin-bottom:10px; cursor:pointer; outline:none; text-decoration: none;">+</a>
        </div>
        <input type="text" name="name" id="RoomName" style="visibility: hidden; position:absolute; margin-left:0px;" placeholder="Chat Room Name" />
        <a href="#" id="newChat" style="visibility: hidden; position:absolute;" data-role="button">Join or Create New Conversation</a>
         
        <br />
         <ul data-role="listview" data-split-icon="delete" data-split-theme="c" id="ChatList">
           
        </ul>
        
       
         
        
      </div><!-- /content -->

    </div><!-- /page -->

    <div data-role="dialog" id="delete">
      <div data-role="content">
        <h3>Are You Sure You Want To Remove This Conversation?</h3>
        <a href="#" data-role="button" id="deleteButton">Delete</a>
        <a href="#" data-role="button" data-rel="back">Cancel</a>
      </div>
    </div>

    <div data-role="page" id="userListPage" data-theme="c">
      <div data-role="header">
        <h1>Messenger</h1>
      </div>

      <div data-role="content">

      </div>
    </div>
     <!-- Include the PubNub Library -->
<script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.27.0.js"></script>
<script>
function resizeInput(h) {
  h=document.getElementById("messageContent");
  if(h.value.length<60){
    h.style.height="50px";
  }
}
    

var c=0;
function add(){
  c++;
  if(c<=1){
    open();
  }else{
    c=0;
    close();
  }
}
function open() {
  document.getElementById("RoomName").style.visibility = "visible";
  document.getElementById("newChat").style.visibility = "visible";
  document.getElementById("RoomName").style.margin = "30px";
  document.getElementById("newChat").style.margin = "20px";
  document.getElementById("RoomName").style.marginLeft = "0px";
  document.getElementById("newChat").style.position = "";
  document.getElementById("RoomName").style.position = "";
}
function close() {
  c=0;
  document.getElementById("RoomName").style.visibility = "hidden";
  document.getElementById("newChat").style.visibility = "hidden";
  document.getElementById("newChat").style.position = "absolute";
  document.getElementById("RoomName").style.position = "absolute";
  
}
var show;
    if(isNaN(localStorage.username)){
        show = document.getElementById('setPassword');
        show.style.visibility = 'visible';
    }else{
        show = document.getElementById('setPassword');
        show.style.visibility = 'visible';
    }
    if(isNaN(localStorage.password)){
      show = document.getElementById('setPassword');
      show.style.visibility = 'hidden';
    }else{
        show = document.getElementById('setPassword');
        show.style.visibility = 'hidden';
    }
  function registerServiceWorker() {
    return navigator.serviceWorker.register('sw.js')
    .then(function(registration) {
    
      return registration
    });
  }
registerServiceWorker();

</script>
  </body>
</html>
